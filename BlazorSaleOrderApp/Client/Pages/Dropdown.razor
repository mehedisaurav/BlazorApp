@using BlazorSaleOrderApp.Shared.Dto.Common
@using System.ComponentModel
@using System.Globalization

<div class="col-md-12">
    <div class="row">
        <span>Select Product</span>
        <select class="form-control" @onchange="@OnSelectionChanged">
            @foreach (var item in Items)
            {
                <option value="@item.Id"> @item.Name </option>
            }
        </select>
    </div>
</div>

@code {
    [Parameter]
    public List<SelectModel> Items { get; set; }

    [Parameter]
    public int SelectedItem { get; set; }

    [Parameter]
    public EventCallback<int> SelectedItemChanged { get; set; }

    private async Task OnSelectionChanged(ChangeEventArgs e)
    {
        int.TryParse(e.Value.ToString(), out int selectedItemId);
        SelectedItem = selectedItemId;
        await SelectedItemChanged.InvokeAsync(SelectedItem);
    }
}